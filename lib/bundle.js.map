{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./lib/background.js","webpack:///./lib/building/building.js","webpack:///./lib/building/commercial.js","webpack:///./lib/car/car.js","webpack:///./lib/car/sedan.js","webpack:///./lib/car/taxi.js","webpack:///./lib/craxi.js","webpack:///./lib/display.js","webpack:///./lib/game.js","webpack:///./lib/grid.js","webpack:///./lib/score.js","webpack:///./lib/util.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;AClFA;AAAA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEe,yEAAU,E;;;;;;;;;;;;AC5CzB;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEe,uEAAQ,E;;;;;;;;;;;;AC5CvB;AAAA;AAAkC;;AAElC,yBAAyB,iDAAQ;AACjC;AACA,uBAAuB,iCAAiC;AACxD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe,yEAAU,EAAC;;;;;;;;;;;;;;ACxB1B;AAAA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB,yBAAyB;AACzB;;AAEA;AACA;AACA;AACA;;AAEe,kEAAG,EAAC;;;;;;;;;;;;;ACnBnB;AAAA;AAAwB;;AAExB,oBAAoB,4CAAG;AACvB;AACA,uB;AACA;AACA;AACA;;AAEA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,oEAAK,E;;;;;;;;;;;;ACzKpB;AAAA;AAAwB;;AAExB,mBAAmB,4CAAG;AACtB;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,mEAAI,E;;;;;;;;;;;;AC9LnB;AAAA;AAAgC;;AAEhC;AACA;AACA;AACA;AACA;AACA,wBAAwB,gDAAO;AAC/B;AACA,CAAC,E;;;;;;;;;;;;ACTD;AAAA;AAAA;AAA0B;AACK;;;AAG/B;AACA;AACA;AACA,oBAAoB,6CAAI;AACxB,kBAAkB,+CAAc;AAChC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,0BAA0B,6CAAI;AAC9B;AACA;AACA;AACA;AACA;AACA,0BAA0B,6CAAI;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEe,sEAAO,E;;;;;;;;;;;;ACtEtB;AAAA;AAAA;AAAA;AAAA;AAAsC;AACR;AACF;AACG;;AAE/B;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,mDAAU;AACpC,qBAAqB,8CAAK;AAC1B,qBAAqB,uDAAsB,qBAAqB,uDAAsB;AACtF,+BAA+B,sDAAqB,iBAAiB,sDAAqB,iBAAiB,sDAAqB,iBAAiB,sDAAqB;AACtK,6EAA6E;AAC7E;AACA,oBAAoB,iDAAI,E;AACxB;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAU,6CAAY,4BAA4B,6CAAY;AAC9D,UAAU,6CAAY,8CAA8C,6CAAY;AAChF;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,iDAAgB;AAC3C,KAAK;AACL,2BAA2B,iDAAgB;AAC3C;AACA;;;AAGA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,+C;AACA;AACA,QAAQ,6CAAY;AACpB;AACA;AACA;AACA;AACA;AACA,iE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uBAAuB,cAAc;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,mEAAI,E;;;;;;;;;;;;AC5RnB;AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEe,mEAAI,E;;;;;;;;;;;;ACpBnB;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA,OAAO,4BAA4B;AACnC;AACA,OAAO,4BAA4B;AACnC;AACA,OAAO,6BAA6B;AACpC;AACA,OAAO,6BAA6B;AACpC;AACA,OAAO;AACP;AACA;AACA,K;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,EAAiB,oEAAK,EAAC;;;;;;;;;;;;;ACtCvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+C;AACrB;AACM;AAChC;AACA;;;AAGO;AACP;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,4DAAU;;AAEvC;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA,mBAAmB,QAAQ;AAC3B;AACA;AACA;AACA;AACA;AACA,uBAAuB,6CAAI;;AAE3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB,OAAO;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEO;AACP,6BAA6B,kDAAK,EAAE,oBAAoB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sFAAsF,wBAAwB,EAAE;AAChH,0FAA0F,oBAAoB,EAAE;AAChH;AACA,uDAAuD;AACvD;AACA,kDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,kDAAK;AAC9C;AACA;;AAEO;AACP;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEO;AACP;AACA;;AAEO;AACP;AACA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./lib/craxi.js\");\n","class Background {\n    constuctor(ctx) {\n        this.ctx = ctx;\n    }\n\n    draw(ctx) {\n        ctx.fillStyle = \"#55595e\";\n        ctx.fillRect(0, 0, 725, 600);\n\n        ctx.beginPath();\n        ctx.rect(125, -1 , 5, 602);\n        ctx.fillStyle = \"#bababa\";\n        ctx.fill();\n        ctx.stroke();\n        \n        ctx.beginPath();\n        ctx.rect(130, -1 , 2.5, 602);\n        ctx.fillStyle = \"#bababa\";\n        ctx.fill();\n        ctx.stroke();\n\n        ctx.beginPath();\n        ctx.rect(592.5, -1 , 2.5, 602);\n        ctx.fillStyle = \"#bababa\";\n        ctx.fill();\n        ctx.stroke();\n\n        ctx.beginPath();\n        ctx.rect(595, -1 , 5, 602);\n        ctx.fillStyle = \"#bababa\";\n        ctx.fill();\n        ctx.stroke();\n\n        const sidewalkPosXs = [-1, 600];\n        sidewalkPosXs.forEach((pos) => {\n        ctx.beginPath();\n        ctx.rect(pos, -1, 126, 602);\n        ctx.fillStyle = \"#ededed\";\n        ctx.fill();\n        ctx.stroke();\n        });\n    }\n}\n\nexport default Background;","class Building {\n    constructor(options) {\n        this.ctx = options.ctx;\n        this.posX = options.posX;\n        this.posY = options.posY;\n        this.topUpperSide = options.topUpperSide;\n        this.topLowerSide = options.topLowerSide;\n        this.topHeight = options.topHeight;\n        this.bodyHeight = options.bodyHeight;\n        // this.prev = options.prev;\n        // this.next = options.next;\n        this.animateBuilding = this.animateBuilding.bind(this);\n    }\n    \n    move(velocity) {\n        this.posY += velocity;\n    }\n\n    animateBuilding(velocity) {\n        let requestAnimationFrame = window.requestAnimationFrame ||\n                                    window.mozRequestAnimationFrame || \n                                    window.webkitRequestAnimationFrame ||\n                                    window.myRequestAnimationFrame;\n        if (this.posY >= -300 && this.posY <= 825) {\n            this.move(velocity);\n            requestAnimationFrame(animateBuilding);\n        } else {\n            this.posY = -300;\n            requestAnimationFrame(animateBuilding);\n        }\n    }\n\n    startAnimation(velocity) {\n        let requestAnimationFrame = window.requestAnimationFrame ||\n                                    window.mozRequestAnimationFrame || \n                                    window.webkitRequestAnimationFrame ||\n                                    window.myRequestAnimationFrame;\n        // if (this.game.inGame === false && this.game.paused === false) {\n            requestAnimationFrame(animateBuilding(velocity));\n        // }\n    }\n\n}\n\nexport default Building;","import Building from \"./building\";\n\nclass Commercial extends Building {\n    constructor(options) {\n        super(options); //, option[prev], option[next]); // 7.5, _ , 110, 40\n        this.colors = [\"#DAA520\", \"#66CDAA\", \"#FFF5EE\", \"#1E90FF\", \"#FFA07A\", \"#DC143C\", \"#448444\", \"#9356A5\", \"#93d7ff\"];\n    }\n\n    draw(i) {\n        this.ctx.beginPath();\n        this.ctx.moveTo(this.posX, this.posY);\n        this.ctx.lineTo(this.posX + this.topUpperSide, this.posY);\n        this.ctx.lineTo(this.posX + this.topUpperSide + (this.topLowerSide - this.topUpperSide) / 2, this.posY + this.topHeight);\n        this.ctx.lineTo(this.posX + this.topUpperSide + (this.topLowerSide - this.topUpperSide) / 2, this.posY + this.topHeight + this.bodyHeight);\n        this.ctx.lineTo(this.posX - (this.topLowerSide - this.topUpperSide) / 2, this.posY + this.topHeight + this.bodyHeight);\n        this.ctx.lineTo(this.posX - (this.topLowerSide - this.topUpperSide) / 2, this.posY + this.topHeight)\n        this.ctx.lineTo(this.posX + this.topUpperSide + (this.topLowerSide - this.topUpperSide) / 2, this.posY + this.topHeight);\n        this.ctx.lineTo(this.posX - (this.topLowerSide - this.topUpperSide) / 2, this.posY + this.topHeight);\n        this.ctx.lineTo(this.posX, this.posY);\n        this.ctx.fillStyle = this.colors[i];\n        this.ctx.fill();\n        this.ctx.stroke();\n    }\n}\nexport default Commercial;\n\n","class Car {\n  constructor(options) {\n    this.lane = options.lane;\n    this.posY = options.posY; // 560;\n    this.posXs = [142.5, 235, 327.5, 420, 512.5];\n    this.posX = this.posXs[this.lane - 1];\n    this.width = 70;\n    this.height = 110;\n    this.wheelDist = 70;\n    this.colors = [\"#b9281f\", \"#f24d13\", \"#45e68f\"];\n    // this.width = 85; // SUV\n    // this.height = 120; // SUV\n  }\n\n  move(velocity) {\n    this.posY += velocity;\n  }\n}\n\nexport default Car;\n","import Car from \"./car\";\n\nclass Sedan extends Car {\n    constructor(options) {\n        super(options); \n        // Refactor: \n        // [canvas]wheelDist should depend on height\n    }\n\n    draw(ctx, i) { // definitely needs to be refactored with n loops\n        ctx.beginPath();\n        ctx.moveTo(this.posX, this.posY);\n        ctx.quadraticCurveTo(this.posX + this.width / 2, this.posY - 15, this.posX + this.width, this.posY);\n        ctx.quadraticCurveTo(this.posX + this.width + 8, this.posY + (this.height / 2), this.posX + this.width, this.posY + this.height);\n        ctx.quadraticCurveTo(this.posX + this.width / 2, this.posY + this.height + 15, this.posX, this.posY + this.height);\n        ctx.quadraticCurveTo(this.posX - 8, this.posY + (this.height / 2), this.posX, this.posY);\n        ctx.fillStyle = this.colors[i % this.colors.length];\n        // ctx.fillStyle = this.colors[Math.floor((Math.random() * 3)];\n        ctx.fill();\n        ctx.stroke();\n\n        ctx.beginPath();\n        ctx.moveTo(this.posX - 7, this.posY + 10);\n        ctx.lineTo(this.posX, this.posY + 10);\n        ctx.lineTo(this.posX, this.posY + 30);\n        ctx.lineTo(this.posX - 7, this.posY + 30);\n        ctx.lineTo(this.posX - 7, this.posY + 10);\n        ctx.fillStyle = \"grey\";\n        ctx.fill();\n        ctx.stroke();\n\n        ctx.beginPath();\n        ctx.moveTo(this.posX + this.width + 7, this.posY + 10);\n        ctx.lineTo(this.posX + this.width, this.posY + 10);\n        ctx.lineTo(this.posX + this.width, this.posY + 30);\n        ctx.lineTo(this.posX + this.width + 7, this.posY + 30);\n        ctx.lineTo(this.posX + this.width + 7, this.posY + 10);\n        ctx.fillStyle = \"grey\";\n        ctx.fill();\n        ctx.stroke();\n\n        ctx.beginPath();\n        ctx.moveTo(this.posX - 7, this.posY + this.wheelDist + 10);\n        ctx.lineTo(this.posX, this.posY + this.wheelDist + 10);\n        ctx.lineTo(this.posX, this.posY + this.wheelDist + 30);\n        ctx.lineTo(this.posX - 7, this.posY + this.wheelDist + 30);\n        ctx.lineTo(this.posX - 7, this.posY + this.wheelDist + 10);\n        ctx.fillStyle = \"grey\";\n        ctx.fill();\n        ctx.stroke();\n\n        ctx.beginPath();\n        ctx.moveTo(this.posX + this.width + 7, this.posY + this.wheelDist + 10);\n        ctx.lineTo(this.posX + this.width, this.posY + this.wheelDist + 10);\n        ctx.lineTo(this.posX + this.width, this.posY + this.wheelDist + 30);\n        ctx.lineTo(this.posX + this.width + 7, this.posY + this.wheelDist + 30);\n        ctx.lineTo(this.posX + this.width + 7, this.posY + this.wheelDist + 10);\n        ctx.fillStyle = \"grey\";\n        ctx.fill();\n        ctx.stroke();\n\n        ctx.beginPath();\n        ctx.moveTo(this.posX + this.width / 2 - 15, this.posY + 102);\n        ctx.lineTo(this.posX + this.width / 2 + 15, this.posY + 102)\n        ctx.stroke();\n\n        ctx.beginPath();\n        ctx.arc(this.posX + this.width / 2, this.posY + this.height / 2 + 25, 85, 33 * Math.PI / 24, 39 * Math.PI / 24);\n        ctx.stroke();\n\n        ctx.beginPath();\n        ctx.arc(this.posX + this.width / 2, this.posY + this.height / 2 + 27.5, 85, 33 * Math.PI / 24, 39 * Math.PI / 24);\n        ctx.stroke();\n\n        ctx.beginPath();\n        ctx.arc(this.posX + this.width / 2, this.posY + this.height / 2 + 30, 85, 33 * Math.PI / 24, 39 * Math.PI / 24);\n        ctx.stroke();\n        // ctx.beginPath();\n        // ctx.ellipse(this.posX + 15, this.posY + 2.5, 3, 10, 75 * Math.PI/180, 0, 2 * Math.PI);\n        // ctx.fillStyle = \"white\";\n        // ctx.fill();\n        // ctx.stroke();\n\n        // ctx.beginPath();\n        // ctx.ellipse(this.posX + this.width - 15, this.posY + 2.5, 3, 10, 105 * Math.PI/180, 0, 2 * Math.PI);\n        // ctx.fillStyle = \"white\";\n        // ctx.fill();\n        // ctx.stroke();\n\n        ctx.beginPath();\n        ctx.moveTo(this.posX + 5, this.posY + 10);\n        ctx.lineTo(this.posX + 10, this.posY + 25)\n        ctx.stroke();\n\n        ctx.beginPath();\n        ctx.moveTo(this.posX + this.width - 5, this.posY + 10);\n        ctx.lineTo(this.posX + this.width - 10, this.posY + 25)\n        ctx.stroke();\n\n        ctx.beginPath();\n        ctx.arc(this.posX + 10, this.posY + this.height - 2.5, 3, 0, 2 * Math.PI);\n        ctx.fillStyle = \"red\";\n        ctx.fill();\n        ctx.stroke();\n\n        ctx.beginPath();\n        ctx.arc(this.posX + 15, this.posY + this.height - 2, 3, 0, 2 * Math.PI);\n        ctx.fillStyle = \"red\";\n        ctx.fill();\n        ctx.stroke();\n\n        ctx.beginPath();\n        ctx.arc(this.posX + this.width - 10, this.posY + this.height - 2.5, 3, 0, 2 * Math.PI);\n        ctx.fillStyle = \"red\";\n        ctx.fill();\n        ctx.stroke();\n\n        ctx.beginPath();\n        ctx.arc(this.posX + this.width - 15, this.posY + this.height - 2, 3, 0, 2 * Math.PI);\n        ctx.fillStyle = \"red\";\n        ctx.fill();\n        ctx.stroke();\n\n        // front window\n        ctx.beginPath();\n        ctx.moveTo(this.posX + 10, this.posY + 30);\n        ctx.lineTo(this.posX + 60, this.posY + 30);\n        ctx.lineTo(this.posX + 60 - 10, this.posY + 30 + 15);\n        ctx.lineTo(this.posX + 20, this.posY + 30 + 15);\n        ctx.lineTo(this.posX + 10, this.posY + 30);\n        ctx.fillStyle = \"#83cef4\";\n        ctx.fill();\n        ctx.stroke();\n\n        // left window\n        ctx.beginPath();\n        ctx.moveTo(this.posX + 5, this.posY + 30);\n        ctx.lineTo(this.posX + 5, this.posY + 30 + 60);\n        ctx.lineTo(this.posX + 5 + 10, this.posY + 30 + 60 - 20);\n        ctx.lineTo(this.posX + 5 + 10, this.posY + 30 + 60 - 20 - 20);\n        ctx.lineTo(this.posX + 5, this.posY + 30);\n        ctx.fillStyle = \"#83cef4\";\n        ctx.fill();\n        ctx.stroke();\n\n        // right window\n        ctx.beginPath();\n        ctx.moveTo(this.posX + 5 + 60, this.posY + 30);\n        ctx.lineTo(this.posX + 5 + 60, this.posY + 30 + 60);\n        ctx.lineTo(this.posX + 5 + 60 - 10, this.posY + 30 + 60 - 20);\n        ctx.lineTo(this.posX + 5 + 60 - 10, this.posY + 30 + 60 - 20 - 20);\n        ctx.lineTo(this.posX + 5 + 60, this.posY + 30);\n        ctx.fillStyle = \"#83cef4\";\n        ctx.fill();\n        ctx.stroke();\n\n        // rear window\n        ctx.beginPath();\n        ctx.moveTo(this.posX + 10, this.posY + 95);\n        ctx.lineTo(this.posX + 10 + 50, this.posY + 95);\n        ctx.lineTo(this.posX + 10 + 50 - 10, this.posY + 95 - 20);\n        ctx.lineTo(this.posX + 10 + 10, this.posY + 95 - 20);\n        ctx.lineTo(this.posX + 10, this.posY + 95);\n        ctx.fillStyle = \"#83cef4\";\n        ctx.fill();\n        ctx.stroke();\n    }\n}\n\nexport default Sedan;","import Car from \"./car\";\n\nclass Taxi extends Car {\n  constructor(options) {\n    super(options); // 315, 470, 70, 110, variable, 0, 70\n    // this.lane = 3;\n    // this.posXs = [142.5, 235, 327.5, 420, 512.5];\n    this.posX = 327.5;\n    this.posY = 470;\n    // Refactor: \n    // [canvas]wheelDist should depend on height\n  }\n\n\n  move(n) {\n    // const targetPosX = this.posX + n;\n    // const diff = n > 0 ? 0.25 : -0.25;\n    // while (this.posX !== targetPosX) {\n    //   this.posX += diff;\n    // }\n    this.posX += n;\n  }\n\n  draw(ctx) {\n    // Refactoring: n for-loops\n\n    // car body\n    ctx.beginPath();\n    ctx.moveTo(this.posX, this.posY);\n    ctx.quadraticCurveTo(this.posX + this.width / 2, this.posY - 15, this.posX + this.width, this.posY);\n    ctx.quadraticCurveTo(this.posX + this.width + 8, this.posY + (this.height / 2), this.posX + this.width, this.posY + this.height);\n    ctx.quadraticCurveTo(this.posX + this.width / 2, this.posY + this.height + 15, this.posX, this.posY + this.height);\n    ctx.quadraticCurveTo(this.posX - 8, this.posY + (this.height / 2), this.posX, this.posY);\n    ctx.fillStyle = \"#EBC72B\";\n    ctx.fill();\n    ctx.stroke();\n\n    // wheels\n    ctx.beginPath();\n    ctx.moveTo(this.posX - 7, this.posY + 10);\n    ctx.lineTo(this.posX, this.posY + 10);\n    ctx.lineTo(this.posX, this.posY + 30);\n    ctx.lineTo(this.posX - 7, this.posY + 30);\n    ctx.lineTo(this.posX - 7, this.posY + 10);\n    ctx.fillStyle = \"grey\";\n    ctx.fill();\n    ctx.stroke();\n\n    ctx.beginPath();\n    ctx.moveTo(this.posX + this.width + 7, this.posY + 10);\n    ctx.lineTo(this.posX + this.width, this.posY + 10);\n    ctx.lineTo(this.posX + this.width, this.posY + 30);\n    ctx.lineTo(this.posX + this.width + 7, this.posY + 30);\n    ctx.lineTo(this.posX + this.width + 7, this.posY + 10);\n    ctx.fillStyle = \"grey\";\n    ctx.fill();\n    ctx.stroke();\n\n    ctx.beginPath();\n    ctx.moveTo(this.posX - 7, this.posY + this.wheelDist + 10);\n    ctx.lineTo(this.posX, this.posY + this.wheelDist + 10);\n    ctx.lineTo(this.posX, this.posY + this.wheelDist + 30);\n    ctx.lineTo(this.posX - 7, this.posY + this.wheelDist + 30);\n    ctx.lineTo(this.posX - 7, this.posY + this.wheelDist + 10);\n    ctx.fillStyle = \"grey\";\n    ctx.fill();\n    ctx.stroke();\n\n    ctx.beginPath();\n    ctx.moveTo(this.posX + this.width + 7, this.posY + this.wheelDist + 10);\n    ctx.lineTo(this.posX + this.width, this.posY + this.wheelDist + 10);\n    ctx.lineTo(this.posX + this.width, this.posY + this.wheelDist + 30);\n    ctx.lineTo(this.posX + this.width + 7, this.posY + this.wheelDist + 30);\n    ctx.lineTo(this.posX + this.width + 7, this.posY + this.wheelDist + 10);\n    ctx.fillStyle = \"grey\";\n    ctx.fill();\n    ctx.stroke();\n\n    // trunk\n    ctx.beginPath();\n    ctx.moveTo(this.posX + this.width / 2 - 15, this.posY + 102);\n    ctx.lineTo(this.posX + this.width / 2 + 15, this.posY + 102)\n    ctx.stroke();\n\n    // headlights\n    ctx.beginPath();\n    ctx.ellipse(this.posX + 15, this.posY + 2.5, 3, 10, 75 * Math.PI/180, 0, 2 * Math.PI);\n    ctx.fillStyle = \"white\";\n    ctx.fill();\n    ctx.stroke();\n\n    ctx.beginPath();\n    ctx.ellipse(this.posX + this.width - 15, this.posY + 2.5, 3, 10, 105 * Math.PI/180, 0, 2 * Math.PI);\n    ctx.fillStyle = \"white\";\n    ctx.fill();\n    ctx.stroke();\n\n    // hood shades\n    ctx.beginPath();\n    ctx.moveTo(this.posX + 5, this.posY + 10);\n    ctx.lineTo(this.posX + 10, this.posY + 25)\n    ctx.stroke();\n\n    ctx.beginPath();\n    ctx.moveTo(this.posX + this.width - 5, this.posY + 10);\n    ctx.lineTo(this.posX + this.width - 10, this.posY + 25)\n    ctx.stroke();\n\n    //brake lights\n    ctx.beginPath();\n    ctx.arc(this.posX + 10, this.posY + this.height - 2.5, 3, 0, 2 * Math.PI);\n    ctx.fillStyle = \"red\";\n    ctx.fill();\n    ctx.stroke();\n\n    ctx.beginPath();\n    ctx.arc(this.posX + 15, this.posY + this.height - 2, 3, 0, 2 * Math.PI);\n    ctx.fillStyle = \"red\";\n    ctx.fill();\n    ctx.stroke();\n\n    ctx.beginPath();\n    ctx.arc(this.posX + this.width - 10, this.posY + this.height - 2.5, 3, 0, 2 * Math.PI);\n    ctx.fillStyle = \"red\";\n    ctx.fill();\n    ctx.stroke();\n\n    ctx.beginPath();\n    ctx.arc(this.posX + this.width - 15, this.posY + this.height - 2, 3, 0, 2 * Math.PI);\n    ctx.fillStyle = \"red\";\n    ctx.fill();\n    ctx.stroke();\n\n    // front window\n    ctx.beginPath();\n    ctx.moveTo(this.posX + 10, this.posY + 30);\n    ctx.lineTo(this.posX + 60, this.posY + 30);\n    ctx.lineTo(this.posX + 60 - 10, this.posY + 30 + 15);\n    ctx.lineTo(this.posX + 20, this.posY + 30 + 15);\n    ctx.lineTo(this.posX + 10, this.posY + 30);\n    ctx.fillStyle = \"#83cef4\";\n    ctx.fill();\n    ctx.stroke();\n\n    // left window\n    ctx.beginPath();\n    ctx.moveTo(this.posX + 5, this.posY + 30);\n    ctx.lineTo(this.posX + 5, this.posY + 30 + 60);\n    ctx.lineTo(this.posX + 5 + 10, this.posY + 30 + 60 - 20);\n    ctx.lineTo(this.posX + 5 + 10, this.posY + 30 + 60 - 20 - 20);\n    ctx.lineTo(this.posX + 5, this.posY + 30);\n    ctx.fillStyle = \"#83cef4\";\n    ctx.fill();\n    ctx.stroke();\n\n    // right window\n    ctx.beginPath();\n    ctx.moveTo(this.posX + 5 + 60, this.posY + 30);\n    ctx.lineTo(this.posX + 5 + 60, this.posY + 30 + 60);\n    ctx.lineTo(this.posX + 5 + 60 - 10, this.posY + 30 + 60 - 20);\n    ctx.lineTo(this.posX + 5 + 60 - 10, this.posY + 30 + 60 - 20 - 20);\n    ctx.lineTo(this.posX + 5 + 60, this.posY + 30);\n    ctx.fillStyle = \"#83cef4\";\n    ctx.fill();\n    ctx.stroke();\n\n    // rear window\n    ctx.beginPath();\n    ctx.moveTo(this.posX + 10, this.posY + 95);\n    ctx.lineTo(this.posX + 10 + 50, this.posY + 95);\n    ctx.lineTo(this.posX + 10 + 50 - 10, this.posY + 95 - 20);\n    ctx.lineTo(this.posX + 10 + 10, this.posY + 95 - 20);\n    ctx.lineTo(this.posX + 10, this.posY + 95);\n    ctx.fillStyle = \"#83cef4\";\n    ctx.fill();\n    ctx.stroke();\n\n    // taxi top\n    ctx.beginPath();\n    ctx.moveTo(this.posX + 30, this.posY + 55);\n    ctx.lineTo(this.posX + 30 + 10, this.posY + 55);\n    ctx.lineTo(this.posX + 30 + 10, this.posY +  55 + 15);\n    ctx.lineTo(this.posX + 30, this.posY +  55 + 15);\n    ctx.lineTo(this.posX + 30, this.posY + 55);\n    ctx.fillStyle = \"white\";\n    ctx.fill();\n    ctx.stroke();\n  }\n}\n\nexport default Taxi;","import Display from \"./display\";\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    const canvas = document.getElementById(\"display\");\n    canvas.width = 725;\n    canvas.height = 600;\n    const ctx = canvas.getContext(\"2d\");\n    const display = new Display(ctx);\n    display.draw();\n});","import Game from \"./game\";\nimport * as Util from \"./util\";\n\n\nclass Display {\n  constructor(ctx) {\n    this.ctx = ctx;\n    this.game = new Game(ctx);\n    this.status = Util.setStatus(this.inGame, this.paused);\n    this.keyDownHandler = this.keyDownHandler.bind(this);\n    this.keyHandlers();\n  }\n\n  keyHandlers() {\n    document.addEventListener('keydown', this.keyDownHandler, false);\n  }\n\n  keyDownHandler(e) {\n    switch (e.keyCode) {\n      case 81:\n        if (this.game.inGame && this.game.paused) {\n          this.ctx.clearRect(0, 0, 725, 600);\n          this.game = new Game(this.ctx);\n          this.game.animate();\n        }\n      case 77:\n        if (!this.game.inGame && this.game.paused) {\n          this.ctx.clearRect(0, 0, 725, 600);\n          this.game = new Game(this.ctx);\n          this.game.animate();\n        }\n      break;\n      case 80:\n        if (!this.game.inGame && !this.game.paused) {\n          this.game.inGame = true;\n        } else if (this.game.inGame && !this.game.paused) {\n          this.game.paused = true;\n        } else if (this.game.inGame && this.game.paused) {\n          this.game.paused = false;\n          this.game.animate();\n        }\n        break;\n      case 37:\n        if (this.game.inGame && !this.game.paused) {\n          if (this.game.taxi.posX > 142.5) {\n            this.game.taxi.lane -= 1;\n            // while (this.game.taxi.posX !== targetPosX) {\n            window.requestAnimationFrame(this.game.taxi.move(92.5 * -1));\n            // }\n          }\n        }\n      break;\n      case 39:\n        if (this.game.inGame && !this.game.paused) {\n          if (this.game.taxi.posX < 512.5) {\n            this.game.taxi.lane += 1;\n            window.requestAnimationFrame(this.game.taxi.move(92.5));\n          }\n        }\n        break;\n      default:\n        break;\n    }\n  }\n  \n  draw() {\n    this.game.run();\n  }\n}\n\nexport default Display;","import Background from \"./background\";\nimport Taxi from \"./car/taxi\";\nimport Score from \"./score\";\nimport * as Util from \"./util\";\n\nclass Game {\n  constructor(ctx) {\n    this.ctx = ctx;\n    this.options = {\n      game: this,\n    };\n    this.background = new Background(this.ctx);\n    this.score = new Score(this);\n    this.buildings = Util.generateBuildings(\"left\", ctx).concat(Util.generateBuildings(\"right\", ctx));\n    this.laneLines = [].concat(Util.generateLaneLine(1, ctx)).concat(Util.generateLaneLine(2, ctx)).concat(Util.generateLaneLine(3, ctx)).concat(Util.generateLaneLine(4, ctx));\n    // this.steadyObjects = [].concat(this.buildings).concat(this.laneLines); // steady in reality (.concat(this.buildings))\n    this.randomCars = [];\n    this.taxi = new Taxi({ \n      lane: 3,\n    });\n    this.inGame = false;\n    this.paused = false;\n    this.collided = false;\n    this.steadyVelocity = 9;\n    this.randomVelocity = 7;\n    this.time = 0;\n    this.fontSize = 36;\n    this.animate = this.animate.bind(this);\n    // this.drawLogo = this.drawLogo.bind(this);\n    this.draw = this.draw.bind(this);\n    this.run = this.run.bind(this);\n  }\n\n  // animateKeyActions() {\n  //   requestAnimationFrame = window.requestAnimationFrame ||\n  //                           window.mozRequestAnimationFrame || \n  //                           window.webkitRequestAnimationFrame ||\n  //                           window.myRequestAnimationFrame;\n  //   requestAnimationFrame(this.keyActions);\n  // }\n\n  collisionDetector() {\n    this.randomCars.forEach((car) => {\n      const xRange = [car.posX, car.posX + car.width];\n      const yRange = [car.posY, car.posY + car.height];\n      if (Util.inRange(this.taxi.posX, xRange) && Util.inRange(this.taxi.posY, yRange) ||\n          Util.inRange(this.taxi.posX + this.taxi.width, xRange) && Util.inRange(this.taxi.posY + this.taxi.height, yRange) ) {\n          this.collided = true;\n          this.inGame = false;\n          this.paused = true;\n      }\n    })\n  }\n\n  updateLevel() {\n    if (this.score.time <= 20) {\n      this.level = \"I\";\n      // this.steadyVelocity = 12.5;\n      // this.randomVelocity = 10;\n    } else if (this.score.time <= 40) {\n      this.level = \"II\";\n      // this.steadyVelocity = 15;\n      // this.randomVelocity = 12.5;\n    } else if (this.score.time <= 60) {\n      this.level = \"III\";\n      // this.steadyVelocity = 17.5;\n      // this.randomVelocity = 15;\n    } else if (this.score.time <= 100) {\n      this.level = \"IV\";\n      // this.steadyVelocity = 20;\n      // this.randomVelocity = 17.5;\n      \n    } else if (this.score.time <= 160) {\n      this.level = \"V\";\n      // this.steadyVelocity = 22.5;\n      // this.randomVelocity = 20;\n    } else {\n      this.level = \"VI\";\n      // this.steadyVelocity = 25;\n      // this.randomVelocity = 22.5;\n    }\n  }\n\n  moveBuildings(velocity) {\n    this.buildings.forEach((building) => {\n      building.move(velocity)\n      if (building.posY >= 1425) {\n        building.posY = -600;\n        // this.buildings.unshift();\n      }\n    })\n  }\n\n  moveLaneLines(velocity) {\n    this.laneLines.forEach((grid) => {\n      grid.move(velocity)\n      if (grid.posY >= 1050) {\n        grid.posY = -355;\n      }\n    })\n  }\n\n  moveSteadyObjects(velocity) {\n    this.moveBuildings(velocity);\n    this.moveLaneLines(velocity);\n  }\n\n  generateCars(level) {\n    const scoreCheckpoints = {\n      I: 50,\n      II: 25,\n      III: 0,\n      IV: -25,\n      V: -50,\n      VI: -75,\n    };\n    if (this.randomCars.length === 0) {\n      this.randomCars.push(Util.generateCar(this.taxi.lane, this.level, false));\n    } else if (this.randomCars[this.randomCars.length - 1].posY >= scoreCheckpoints[level]) {\n      this.randomCars.push(Util.generateCar(this.taxi.lane, this.level, true));\n    }\n  }\n\n\n  moveRandomCars(velocity) {\n    this.randomCars.forEach((car) => {\n        car.move(velocity);\n    });\n  }\n\n  step(steadyVelocity, randomVelocity) {\n    this.collisionDetector();\n    this.updateLevel();\n    if (this.inGame && !this.paused) {\n      switch (this.level) {\n        case \"I\":\n          this.steadyVelocity *= Math.pow(1.05, 1/600);\n          this.randomVelocity *= Math.pow(1.05, 1/600);\n          break;\n        case \"II\":\n          this.steadyVelocity *= Math.pow(1.05, 1/600);\n          this.randomVelocity *= Math.pow(1.05, 1/600);\n          break;\n        case \"III\":\n          this.steadyVelocity *= Math.pow(1.1, 1/600);\n          this.randomVelocity *= Math.pow(1.1, 1/600);\n          break;\n        case \"IV\":\n          this.steadyVelocity *= Math.pow(1.1, 1/600);\n          this.randomVelocity *= Math.pow(1.1, 1/600);\n          break;\n        case \"V\":\n          this.steadyVelocity *= Math.pow(1.15, 1/600);\n          this.randomVelocity *= Math.pow(1.15, 1/600);\n          break;\n      }\n    }\n    this.moveSteadyObjects(steadyVelocity);\n    this.moveRandomCars(randomVelocity);\n  }\n\n  animate() {\n    let velocity;\n    requestAnimationFrame = window.requestAnimationFrame ||\n                            window.mozRequestAnimationFrame || \n                            window.webkitRequestAnimationFrame ||\n                            window.myRequestAnimationFrame;\n    // this.ctx.clearRect(0, 0, 725, 600);\n    if (!this.inGame && !this.paused) {\n      this.time += 1;\n      this.step(this.steadyVelocity, this.randomVelocity);\n      this.draw(this.ctx);\n      requestAnimationFrame(this.animate);\n    } else if (this.inGame && !this.paused) {\n      this.step(this.steadyVelocity, this.randomVelocity);\n      this.generateCars(this.level);\n      this.draw(this.ctx);\n      requestAnimationFrame(this.animate);\n    } else if (this.inGame && this.paused) {\n      this.step(this.steadyVelocity, this.randomVelocity);\n      this.generateCars(this.level);\n      this.draw(this.ctx);\n      window.cancelAnimationFrame(this.animate);\n      this.pauses += 1;\n    } else if (!this.inGame && this.paused) {\n      window.cancelAnimationFrame(this.animate);\n    }\n  }\n\n  drawStartScreen() {\n    this.logo = new Image();\n    this.logo.onload = () => {\n      this.ctx.drawImage(this.logo, 0, 0);\n    }\n    this.logo.src = './assets/images/logo.png'; \n    const time = this.time % 120;\n    if (Util.inRange(time, [0, 59])) {\n      // this.ctx.fill();\n      this.ctx.fillStyle = \"white\";\n      this.ctx.font = \"36px Verdana\";\n      this.ctx.strokeStyle = \"\";\n      this.ctx.textAlign = \"center\";\n      this.ctx.fillText(\"Press P to start the game\", 362.5, 450);  \n    }\n  }\n\n  drawPauseScreen() {\n    this.ctx.fillStyle = \"white\";\n    this.ctx.fill();\n    this.ctx.font = \"30px Verdana\";\n    this.ctx.fillText(\"Press P to resume the game\", 362.5, 250);\n    this.ctx.fillText(\"Press Q to quit the game\", 362.5, 350);\n  }\n\n  drawOverScreen() {\n    this.ctx.fill();\n    this.ctx.font = \"36px Verdana\";\n    this.ctx.textAlign = \"center\";\n    this.ctx.fillText(\"GAME OVER\", 362.5, 250);\n    this.ctx.fillText(\"Press M to return to menu\", 362.5, 350);\n  }\n\n  drawLevel() {\n    this.ctx.font = `${this.fontSize}px Verdana`;\n    this.ctx.fillStyle = this.fontSize > 30 ? \"yellow\" : \"black\";\n    this.ctx.fillText(\"LEVEL \" + this.level, 75, 40);\n    if (this.fontSize >= 24) {\n      this.fontSize *= Math.pow(2/3, 1/60);\n    }\n    switch (this.score.time) {\n      case 20:\n        this.fontSize = 36;\n        break;\n      case 40:\n        this.fontSize = 36;\n        break;\n      case 60:\n        this.fontSize = 36;\n        break;\n      case 100:\n        this.fontSize = 36;\n        break;\n      case 160:\n        this.fontSize = 36;\n        break;\n    }\n  }\n  \n  draw() {\n    this.background.draw(this.ctx, this);\n    this.buildings.forEach((building, i) => {\n      building.draw(i % building.colors.length);\n    })\n    this.laneLines.forEach((grid) => {\n      grid.draw();\n    })\n    if (!(!this.inGame && !this.paused)) {\n      this.drawLevel();\n      this.score.draw(this.ctx);\n    }\n    \n    this.randomCars.forEach((car, i) => {\n      car.draw(this.ctx, i);\n    })\n    this.taxi.draw(this.ctx);\n    if (!this.inGame && !this.paused) {\n      // this.drawLogo();\n      this.drawStartScreen();\n    } else if (this.inGame && this.paused) {\n      this.drawPauseScreen();\n    } else if (!this.inGame && this.paused) {\n      this.drawOverScreen();\n    }\n  }\n\n  run() {\n    requestAnimationFrame = window.requestAnimationFrame ||\n                            window.mozRequestAnimationFrame || \n                            window.webkitRequestAnimationFrame ||\n                            window.myRequestAnimationFrame;\n    requestAnimationFrame(this.animate);\n  }\n}\n\nexport default Game;","class Grid {\n    constructor(options) {\n        this.ctx = options.ctx;\n        this.posX = options.posX;\n        this.posY = options.posY;\n    }\n\n    move(velocity) {\n        this.posY += velocity;\n    }\n\n    draw() {\n        this.ctx.beginPath();\n        this.ctx.rect(this.posX, this.posY, 2.5, 10);\n        this.ctx.fillStyle = \"white\";\n        this.ctx.fill();\n        this.ctx.stroke();\n    }\n}\n\nexport default Grid;","class Score {\n  constructor() {\n    this.dt = 0;\n    this.time = 0;\n    this.points = 0;\n    this.fontSize = 36;\n    this.startIncrement = this.startIncrement.bind(this);\n  }\n\n  startIncrement() {\n    this.oldTime = this.time;\n    this.dt += 1;\n    this.time = this.dt / 30;\n    if (Math.floor(this.time) !== Math.floor(this.oldTime)) {\n      if (this.time <= 20) { // 10s\n        this.points += 1;\n      } else if (this.time <= 40) { // 20s\n        this.points += 1.2;\n      } else if (this.time <= 60) { // 30s\n        this.points += 1.4;\n      } else if (this.time <= 100) { // 50s\n        this.points += 1.6;\n      } else if (this.time <= 160) { // 80s\n        this.points += 1.8;\n      } else {\n        this.points += 2;\n      }\n    }    \n  }\n\n  draw(ctx) {\n    ctx.font = \"24px Verdana\";\n    ctx.fillStyle = \"black\";\n    ctx.fillText(\"SCORE \" + Math.round(this.points), 650, 40);\n    this.startIncrement();\n  }\n}\n  \n  export default Score;\n  ","import Commercial from \"./building/commercial\";\nimport Grid from \"./grid\";\nimport Sedan from \"./car/sedan\";\n// import Sedan from \"./car/sedan\";\n// import Church from \"./building/church\";\n\n\nexport const generateBuildings = (side, ctx) => {\n    let buildings = [];\n    let initPosX = side === \"left\" ? -50 : 675;\n    let initPosY = -1050;\n    for (let i = 0; i < 9; i++) {\n        let options = {\n            ctx: ctx,\n            posX: initPosX,\n            posY: initPosY,\n            topUpperSide: 90,\n            topLowerSide: 100,\n            topHeight: 100,\n            bodyHeight: 50,\n        };\n        let commercial = new Commercial(options);\n\n        buildings.push(commercial);\n        initPosY += 225;\n    }\n    return buildings;\n}\n\nexport const generateLaneLine = (n, ctx) => {\n    const posArr = [222.5, 315, 407.5, 500]\n    let laneLineGrids = [];\n    let initPosX = posArr[n - 1];\n    let initPosY = -300;\n    for (let i = 0; i < 45; i++) {\n        let options = {\n            ctx: ctx,\n            posX: initPosX,\n            posY: initPosY,\n        };\n        let grid = new Grid(options);\n\n        laneLineGrids.push(grid);\n        initPosY += 85;\n    }\n    return laneLineGrids;\n}\n\n// export const generateCars = () => {\n//     let cars = [];\n//     for (let i = 0; i < 9; i++) {\n//         let options = {\n//             ctx: ctx,\n//             posX: initPosX,\n//             posY: initPosY,\n//             topUpperSide: 90,\n//             topLowerSide: 100,\n//             topHeight: 100,\n//             bodyHeight: 50,\n//         };\n//         let commercial = new Commercial(options);\n\n//         buildings.push(commercial);\n//         initPosY += 175;\n//     }\n//     return buildings;\n// }\n\nexport const generateCar = (currentLane, level, checker = true) => {\n    if (!checker) return new Sedan({lane: 3, posY: -500});\n    const arrayLengths = {\n        \"I\": 15,\n        \"II\": 15,\n        \"III\": 22,\n        \"IV\": 22,\n        \"V\": 35, \n        \"VI\": 35, \n    }\n    // const lanes = Array.apply(null, Array(arrayLengths[level])).map(function (el) { return currentLane + 1; })\n    const currentLanes = Array.apply(null, Array(arrayLengths[level])).map(function (el) { return currentLane; })\n    // debugger\n    const lanes = [1, 2, 3, 4, 5].concat(currentLanes); // 327.5\n    // debugger\n    // const suvPosXs = [130, 220, 310, 400, 490]; // suv: 80 * 120;\n    const lane = lanes[Math.floor(Math.random() * lanes.length)];\n    const types = [\"sedan\"];\n    const type = types[0];\n    const options = {\n        lane: lane,\n        posY: -500,\n    }\n    // const type = types[Math.floor(Math.random() * 2)];\n    const car = (type === \"sedan\") ? new Sedan(options) : null;\n    return car;\n}\n\nexport const setStatus = (inGame, paused) => {\n    // return \"playing\";\n    if (!inGame && !paused) {\n        return \"ready\";\n    } else if (inGame && !paused) {\n        return \"playing\";\n    } else if (inGame && paused) {\n        return \"paused\";\n    } else if (!inGame && paused) {\n        return \"over\";\n    }\n}\n\nexport const inRange = (pos, posRange) => {\n    return pos >= posRange[0] && pos <= posRange[1];\n}\n\nexport const exRange = (pos, posRange) => {\n    return pos > posRange[0] && pos < posRange[1];\n}\n"],"sourceRoot":""}